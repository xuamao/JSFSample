<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!-- Ant build file (http://ant.apache.org/) for Ant 1.6.2 or above.        -->
<!-- ====================================================================== -->

<!-- ====================================================================== -->
<!-- ===================== - DO NOT EDIT THIS FILE! - ===================== -->
<!-- ====================================================================== -->
<!--                                                                        -->
<!-- Any modifications will be overwritten.                                 -->
<!--                                                                        -->
<!-- Generated by Maven Ant Plugin on 5/29/13 2:52 PM                       -->
<!-- See: http://maven.apache.org/plugins/maven-ant-plugin/                 -->
<!--                                                                        -->
<!-- ====================================================================== -->

<project name="cube-online-module" default="package" basedir=".">

	<!-- ====================================================================== -->
	<!-- Location of Project: CUBE-Common-Module                                -->
	<!-- ====================================================================== -->

	<property name="cube-common-module.relative.url" value="../CUBE-Common-Module/target">
	</property>


	<!-- ====================================================================== -->
	<!-- Build environment properties                                           -->
	<!-- ====================================================================== -->

	<property file="build.properties"/>

	<property name="maven.build.finalName" value="cube-online-module-0.0.1-SNAPSHOT"/>
	<property name="maven.build.dir" value="target"/>
	<property name="maven.build.outputDir" value="${maven.build.dir}/classes"/>
	<property name="maven.build.srcDir.0" value="src/main/java"/>
	<property name="maven.build.resourceDir.0" value="src/main/resources"/>
	<property name="maven.build.testOutputDir" value="${maven.build.dir}/test-classes"/>
	<property name="maven.build.testDir.0" value="src/test/java"/>
	<property name="maven.build.testResourceDir.0" value="src/test/resources"/>
	<property name="maven.test.reports" value="${maven.build.dir}/test-reports"/>
	<property name="maven.reporting.outputDirectory" value="${maven.build.dir}/site"/>

	<property name="maven.repo.local" value="${user.home}/.m2/repository"/>
	<property name="maven.settings.offline" value="false"/>
	<property name="maven.settings.interactiveMode" value="false"/>

	<property name="jboss.home" value="/opt/jboss-as-7.1.1.Final/"/>
	<!--<property name="jboss.home" value="C:/Entwicklung/jboss-as-7.1.1.Final"/>-->
	
	<!-- ====================================================================== -->
	<!-- Defining classpaths                                                    -->
	<!-- ====================================================================== -->

	<path id="build.classpath">
		<pathelement location="lib/log4j-1.2.16.jar"/>

		<pathelement location="lib/jsf-api-2.1.0-b03.jar"/>
		<pathelement location="lib/jsf-impl-2.1.0-b03.jar"/>

		<pathelement location="lib/primefaces-3.5.jar"/>
		<pathelement location="lib/primefaces-cruze-1.0.10.jar"/>
		<pathelement location="${cube-common-module.relative.url}/cube-common-module-0.0.1-SNAPSHOT.jar"/>
		
		<pathelement location="${jboss.home}/modules/javax/servlet/api/main/jboss-servlet-api_3.0_spec-1.0.0.Final.jar"/>
	</path>
	<path id="build.test.classpath">
		<pathelement location="lib/junit-4.11.jar"/>
		<pathelement location="lib/log4j-1.2.16.jar"/>
		<pathelement location="${jboss.home}/modules/javax/servlet/api/main/jboss-servlet-api_3.0_spec-1.0.0.Final.jar"/>
		<pathelement location="lib/primefaces-3.5.jar"/>
		<pathelement location="lib/primefaces-cruze-1.0.10.jar"/>
		<pathelement location="${cube-common-module.relative.url}/cube-common-module-0.0.1-SNAPSHOT.jar"/>

	</path>

	<!-- ====================================================================== -->
	<!-- Cleaning up target                                                     -->
	<!-- ====================================================================== -->

	<target name="clean" description="Clean the output directory">
		<delete dir="${maven.build.dir}"/>
	</target>

	<!-- ====================================================================== -->
	<!-- Compilation target                                                     -->
	<!-- ====================================================================== -->

	<target name="compile" description="Compile the code">
		<mkdir dir="${maven.build.outputDir}"/>
		<javac destdir="${maven.build.outputDir}" 
           nowarn="false" 
           debug="true" 
           optimize="false" 
           deprecation="true" 
           target="1.7" 
           verbose="false" 
           fork="false" 
           source="1.7">
			<src>
				<pathelement location="${maven.build.srcDir.0}"/>
			</src>
			<classpath refid="build.classpath"/>
		</javac>
		<copy todir="${maven.build.outputDir}">
			<fileset dir="${maven.build.resourceDir.0}"/>
		</copy>
	</target>

	<!-- ====================================================================== -->
	<!-- Test-compilation target                                                -->
	<!-- ====================================================================== -->

	<target name="compile-tests" 
          depends="compile" 
          description="Compile the test code" 
          unless="maven.test.skip">
		<mkdir dir="${maven.build.testOutputDir}"/>
		<javac destdir="${maven.build.testOutputDir}" 
           nowarn="false" 
           debug="true" 
           optimize="false" 
           deprecation="true" 
           target="1.7" 
           verbose="false" 
           fork="false" 
           source="1.7">
			<src>
				<pathelement location="${maven.build.testDir.0}"/>
			</src>
			<classpath>
				<path refid="build.test.classpath"/>
				<pathelement location="${maven.build.outputDir}"/>
			</classpath>
		</javac>
		<copy todir="${maven.build.testOutputDir}">
			<fileset dir="${maven.build.testResourceDir.0}"/>
		</copy>
	</target>

	<!-- ====================================================================== -->
	<!-- Run all tests                                                          -->
	<!-- ====================================================================== -->

	<target name="test" 
          depends="compile-tests, junit-missing" 
          unless="junit.skipped" 
          description="Run the test cases">
		<mkdir dir="${maven.test.reports}"/>
		<junit printSummary="yes" haltonerror="true" haltonfailure="true" fork="true" dir=".">
			<sysproperty key="basedir" value="."/>
			<formatter type="xml"/>
			<formatter type="plain" usefile="false"/>
			<classpath>
				<path refid="build.test.classpath"/>
				<pathelement location="${maven.build.outputDir}"/>
				<pathelement location="${maven.build.testOutputDir}"/>
			</classpath>
			<batchtest todir="${maven.test.reports}" unless="test">
				<fileset dir="${maven.build.testDir.0}">
					<include name="**/Test*.java"/>
					<include name="**/*Test.java"/>
					<include name="**/*TestCase.java"/>
					<exclude name="**/*Abstract*Test.java"/>
				</fileset>
			</batchtest>
			<batchtest todir="${maven.test.reports}" if="test">
				<fileset dir="${maven.build.testDir.0}">
					<include name="**/${test}.java"/>
					<exclude name="**/*Abstract*Test.java"/>
				</fileset>
			</batchtest>
		</junit>
	</target>

	<target name="test-junit-present">
		<available classname="junit.framework.Test" property="junit.present"/>
	</target>

	<target name="test-junit-status" 
          depends="test-junit-present">
		<condition property="junit.missing">
			<and>
				<isfalse value="${junit.present}"/>
				<isfalse value="${maven.test.skip}"/>
			</and>
		</condition>
		<condition property="junit.skipped">
			<or>
				<isfalse value="${junit.present}"/>
				<istrue value="${maven.test.skip}"/>
			</or>
		</condition>
	</target>

	<target name="junit-missing" 
          depends="test-junit-status" 
          if="junit.missing">
		<echo>=================================== WARNING ===================================</echo>
		<echo> JUnit is not present in your $ANT_HOME/lib directory. Tests not executed.</echo>
		<echo>===============================================================================</echo>
	</target>

	<!-- ====================================================================== -->
	<!-- Javadoc target                                                         -->
	<!-- ====================================================================== -->

	<target name="javadoc" description="Generates the Javadoc of the application">
		<javadoc sourcepath="${maven.build.srcDir.0}" 
             packagenames="*" 
             destdir="${maven.reporting.outputDirectory}/apidocs" 
             access="protected" 
             old="false" 
             verbose="false" 
             version="true" 
             use="true" 
			 header="&lt;img src=&quot;heinelogo-xl.png&quot;&gt;&lt;/a&gt;"
             author="true" 
             splitindex="false" 
             nodeprecated="false" 
             nodeprecatedlist="false" 
             notree="false" 
             noindex="false" 
             nohelp="false" 
             nonavbar="false" 
             serialwarn="false" 
             charset="ISO-8859-1" 
             linksource="false" 
             breakiterator="false"/>
		<copy toDir="${maven.reporting.outputDirectory}/apidocs" file="target/heinelogo-xl.png"/>
	</target>

	<!-- ====================================================================== -->
	<!-- Package target                                                         -->
	<!-- ====================================================================== -->

	<target name="package" depends="compile,test" description="Package the application">
		<mkdir dir="${maven.build.dir}/${maven.build.finalName}/WEB-INF/lib"/>
		
		<!--
		<copy file="lib/log4j-1.2.16.jar" 
          todir="${maven.build.dir}/${maven.build.finalName}/WEB-INF/lib"/>
		<copy file="lib/jsf-api-2.1.0-b03.jar" 
          todir="${maven.build.dir}/${maven.build.finalName}/WEB-INF/lib"/>
		<copy file="lib/jsf-impl-2.1.0-b03.jar" 
          todir="${maven.build.dir}/${maven.build.finalName}/WEB-INF/lib"/>
		-->
		
		<copy file="lib/primefaces-3.5.jar" 
          todir="${maven.build.dir}/${maven.build.finalName}/WEB-INF/lib"/>
		
		<copy file="lib/primefaces-cruze-1.0.10.jar" 
		          todir="${maven.build.dir}/${maven.build.finalName}/WEB-INF/lib"/>
		
		<copy file="${cube-common-module.relative.url}/cube-common-module-0.0.1-SNAPSHOT.jar" 
          todir="${maven.build.dir}/${maven.build.finalName}/WEB-INF/lib"/>

		<war destfile="${maven.build.dir}/${maven.build.finalName}.war" 
         compress="true" 
         webxml="src/main/webapp/WEB-INF/web.xml">
			<lib dir="${maven.build.dir}/${maven.build.finalName}/WEB-INF/lib"/>
			<classes dir="${maven.build.outputDir}"/>
			<fileset dir="src/main/webapp" 
               excludes="WEB-INF/web.xml"/>
		</war>
	</target>

	<!-- ====================================================================== -->
	<!-- A dummy target for the package named after the type it creates         -->
	<!-- ====================================================================== -->

	<target name="war" depends="package" description="Builds the war for the application"/>

</project>
